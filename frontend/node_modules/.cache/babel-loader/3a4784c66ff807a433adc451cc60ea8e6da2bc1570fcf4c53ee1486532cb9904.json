{"ast":null,"code":"import axios from\"axios\";import{useEffect,useReducer}from\"react\";import{useParams}from\"react-router-dom\";import{Helmet}from\"react-helmet-async\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{getError}from\"../utils\";import HTMLTagRenderer from\"../components/HTMLTagRenderer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const reducer=(state,action)=>{switch(action.type){case\"FETCH_REQUEST\":return{...state,loading:true};case\"FETCH_SUCCESS\":return{...state,info:action.payload,loading:false};case\"FETCH_FAIL\":return{...state,loading:false,error:action.payload};default:return state;}};function InfoScreen(){const params=useParams();const{slug}=params;const[{loading,error,info},dispatch]=useReducer(reducer,{info:[],loading:true,error:\"\"});useEffect(()=>{const fetchData=async()=>{dispatch({type:\"FETCH_REQUEST\"});try{const result=await axios.get(\"/api/infos/slug/\".concat(slug));dispatch({type:\"FETCH_SUCCESS\",payload:result.data});}catch(err){dispatch({type:\"FETCH_FAIL\",payload:getError(err)});}};fetchData();},[slug]);return loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:info.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-blog-holder margin-holder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"blog-img-holder\",children:[/*#__PURE__*/_jsx(\"h1\",{children:info.title}),/*#__PURE__*/_jsx(\"img\",{className:\"img-main\",src:info.image,alt:info.title})]}),info.source&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"iframe\",{className:\"blog-iframe\",title:info.title,src:info.source,style:{width:\"100vw\",height:\"calc(100vw / 1.9\"}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"blog-markup-holder\",children:/*#__PURE__*/_jsx(HTMLTagRenderer,{allowedTags:[\"b\",\"div\",\"p\",\"blockquote\",\"caption\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"i\",\"hr\",\"span\",\"table\",\"tbody\",\"tr\",\"td\",\"em\",\"strong\",\"i\"],string:info.blog})})})]})]});}export default InfoScreen;","map":{"version":3,"names":["axios","useEffect","useReducer","useParams","Helmet","LoadingBox","MessageBox","getError","HTMLTagRenderer","jsx","_jsx","jsxs","_jsxs","reducer","state","action","type","loading","info","payload","error","InfoScreen","params","slug","dispatch","fetchData","result","get","concat","data","err","variant","children","title","className","src","image","alt","source","style","width","height","allowedTags","string","blog"],"sources":["/Users/jtlovato/Documents/GitHub/AOPortfolio/AyodelePortfolio/frontend/src/screens/InfoScreen.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useReducer } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet-async\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { getError } from \"../utils\";\nimport HTMLTagRenderer from \"../components/HTMLTagRenderer\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_REQUEST\":\n      return { ...state, loading: true };\n    case \"FETCH_SUCCESS\":\n      return { ...state, info: action.payload, loading: false };\n    case \"FETCH_FAIL\":\n      return { ...state, loading: false, error: action.payload };\n    default:\n      return state;\n  }\n};\n\nfunction InfoScreen() {\n  const params = useParams();\n  const { slug } = params;\n\n  const [{ loading, error, info }, dispatch] = useReducer(reducer, {\n    info: [],\n    loading: true,\n    error: \"\",\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: \"FETCH_REQUEST\" });\n      try {\n        const result = await axios.get(`/api/infos/slug/${slug}`);\n        dispatch({ type: \"FETCH_SUCCESS\", payload: result.data });\n      } catch (err) {\n        dispatch({ type: \"FETCH_FAIL\", payload: getError(err) });\n      }\n    };\n    fetchData();\n  }, [slug]);\n\n  return loading ? (\n    <LoadingBox />\n  ) : error ? (\n    <MessageBox variant='danger'>{error}</MessageBox>\n  ) : (\n    <div>\n      <Helmet>\n        <title>{info.title}</title>\n      </Helmet>\n      <div className='main-blog-holder margin-holder'>\n        <div className='blog-img-holder'>\n          <h1>{info.title}</h1>\n          <img className='img-main' src={info.image} alt={info.title}></img>\n        </div>\n        {info.source && (\n          <div>\n            <iframe\n              className='blog-iframe'\n              title={info.title}\n              src={info.source}\n              style={{ width: \"100vw\", height: \"calc(100vw / 1.9\" }}\n            ></iframe>\n          </div>\n        )}\n        <div>\n          <div className='blog-markup-holder'>\n            <HTMLTagRenderer\n              allowedTags={[\n                \"b\",\n                \"div\",\n                \"p\",\n                \"blockquote\",\n                \"caption\",\n                \"h1\",\n                \"h2\",\n                \"h3\",\n                \"h4\",\n                \"h5\",\n                \"i\",\n                \"hr\",\n                \"span\",\n                \"table\",\n                \"tbody\",\n                \"tr\",\n                \"td\",\n                \"em\",\n                \"strong\",\n                \"i\",\n              ]}\n              string={info.blog}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default InfoScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}