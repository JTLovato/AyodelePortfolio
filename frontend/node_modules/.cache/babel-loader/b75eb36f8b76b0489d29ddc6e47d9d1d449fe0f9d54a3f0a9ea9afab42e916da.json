{"ast":null,"code":"import{useContext}from\"react\";import{Store}from\"../Store\";import{Helmet}from\"react-helmet-async\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import MessageBox from\"../components/MessageBox\";import ListGroup from\"react-bootstrap/ListGroup\";import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){const navigate=useNavigate();const{state,dispatch:ctxDispatch}=useContext(Store);const{cart:{cartItems}}=state;const updateCartHandler=async(item,quantity)=>{const{data}=await axios.get(\"/api/products/\".concat(item._id));if(data.countInStock<quantity){window.alert(\"Sorry. Product is out of stock\");return;}ctxDispatch({type:\"CART_ADD_ITEM\",payload:{...item,quantity}});};const removeItemHandler=item=>{ctxDispatch({type:\"CART_REMOVE_ITEM\",payload:item});};const checkoutHandler=()=>{navigate(\"/signin?redirect=/shipping\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),\" \",/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{onClick:()=>updateCartHandler(item,item.quantity-1),variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),\" \",/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:()=>updateCartHandler(item,item.quantity+1),disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:()=>removeItemHandler(item),variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id))})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce((a,c)=>a+c.quantity,0),\" \",\"items) : $\",cartItems.reduce((a,c)=>a+c.price*c.quantity,0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","navigate","state","dispatch","ctxDispatch","cart","cartItems","updateCartHandler","item","quantity","data","get","concat","_id","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","children","md","length","to","map","Item","className","src","image","alt","name","slug","onClick","variant","disabled","price","Body","reduce","a","c"],"sources":["/Users/jtlovato/Documents/base/base/frontend/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from \"react\";\nimport { Store } from \"../Store\";\nimport { Helmet } from \"react-helmet-async\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport MessageBox from \"../components/MessageBox\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function CartScreen() {\n  const navigate = useNavigate();\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const {\n    cart: { cartItems },\n  } = state;\n\n  const updateCartHandler = async (item, quantity) => {\n    const { data } = await axios.get(`/api/products/${item._id}`);\n    if (data.countInStock < quantity) {\n      window.alert(\"Sorry. Product is out of stock\");\n      return;\n    }\n    ctxDispatch({\n      type: \"CART_ADD_ITEM\",\n      payload: { ...item, quantity },\n    });\n  };\n  const removeItemHandler = (item) => {\n    ctxDispatch({ type: \"CART_REMOVE_ITEM\", payload: item });\n  };\n\n  const checkoutHandler = () => {\n    navigate(\"/signin?redirect=/shipping\");\n  };\n\n  return (\n    <div>\n      <Helmet>\n        <title>Shopping Cart</title>\n      </Helmet>\n      <h1>Shopping Cart</h1>\n      <Row>\n        <Col md={8}>\n          {cartItems.length === 0 ? (\n            <MessageBox>\n              Cart is empty. <Link to='/'>Go Shopping</Link>\n            </MessageBox>\n          ) : (\n            <ListGroup>\n              {cartItems.map((item) => (\n                <ListGroup.Item key={item._id}>\n                  <Row className='align-items-center'>\n                    <Col md={4}>\n                      <img\n                        src={item.image}\n                        alt={item.name}\n                        className='img-fluid rounded img-thumbnail'\n                      ></img>{\" \"}\n                      <Link to={`/product/${item.slug}`}>{item.name}</Link>\n                    </Col>\n                    <Col md={3}>\n                      <Button\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity - 1)\n                        }\n                        variant='light'\n                        disabled={item.quantity === 1}\n                      >\n                        <i className='fas fa-minus-circle'></i>\n                      </Button>{\" \"}\n                      <span>{item.quantity}</span>{\" \"}\n                      <Button\n                        variant='light'\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity + 1)\n                        }\n                        disabled={item.quantity === item.countInStock}\n                      >\n                        <i className='fas fa-plus-circle'></i>\n                      </Button>\n                    </Col>\n                    <Col md={3}>${item.price}</Col>\n                    <Col md={2}>\n                      <Button\n                        onClick={() => removeItemHandler(item)}\n                        variant='light'\n                      >\n                        <i className='fas fa-trash'></i>\n                      </Button>\n                    </Col>\n                  </Row>\n                </ListGroup.Item>\n              ))}\n            </ListGroup>\n          )}\n        </Col>\n        <Col md={4}>\n          <Card>\n            <Card.Body>\n              <ListGroup variant='flush'>\n                <ListGroup.Item>\n                  <h3>\n                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{\" \"}\n                    items) : $\n                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\n                  </h3>\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <div className='d-grid'>\n                    <Button\n                      type='button'\n                      variant='primary'\n                      onClick={checkoutHandler}\n                      disabled={cartItems.length === 0}\n                    >\n                      Proceed to Checkout\n                    </Button>\n                  </div>\n                </ListGroup.Item>\n              </ListGroup>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}