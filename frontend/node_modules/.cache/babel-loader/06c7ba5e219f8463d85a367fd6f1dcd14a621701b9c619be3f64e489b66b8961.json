{"ast":null,"code":"import React,{useContext,useReducer,useState}from\"react\";import{Helmet}from\"react-helmet-async\";import{Store}from\"../Store\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{toast}from\"react-toastify\";import{getError}from\"../utils\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const reducer=(state,action)=>{switch(action.type){case\"UPDATE_REQUEST\":return{...state,loadingUpdate:true};case\"UPDATE_SUCCESS\":return{...state,loadingUpdate:false};case\"UPDATE_FAIL\":return{...state,loadingUpdate:false};default:return state;}};export default function ProfileScreen(){const{state,dispatch:ctxDispatch}=useContext(Store);const{userInfo}=state;const[name,setName]=useState(userInfo.name);const[email,setEmail]=useState(userInfo.email);const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[{loadingUpdate},dispatch]=useReducer(reducer,{loadingUpdate:false});const submitHandler=async e=>{e.preventDefault();try{const{data}=await axios.put(\"/api/users/profile\",{name,email,password},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});dispatch({type:\"UPDATE_SUCCESS\"});ctxDispatch({type:\"USER_SIGNIN\",payload:data});localStorage.setItem(\"userInfo\",JSON.stringify(data));toast.success(\"User Updated Successfully!\");}catch(err){dispatch({type:\"FETCH_FAIL\"});toast.error(getError(err));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"User Profile\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"my-3\",children:\"User Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",contrilId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",contrilId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",contrilId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",contrilId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{value:password,onChange:e=>setConfirmPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Update\"})})]})]});}","map":{"version":3,"names":["React","useContext","useReducer","useState","Helmet","Store","Form","Button","toast","getError","axios","jsx","_jsx","jsxs","_jsxs","reducer","state","action","type","loadingUpdate","ProfileScreen","dispatch","ctxDispatch","userInfo","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","submitHandler","e","preventDefault","data","put","headers","Authorization","concat","token","payload","localStorage","setItem","JSON","stringify","success","err","error","className","children","onSubmit","Group","contrilId","Label","Control","value","onChange","target","required"],"sources":["/Users/jtlovato/Documents/base/base/frontend/src/screens/ProfileScreen.js"],"sourcesContent":["import React, { useContext, useReducer, useState } from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Store } from \"../Store\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { toast } from \"react-toastify\";\nimport { getError } from \"../utils\";\nimport axios from \"axios\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"UPDATE_REQUEST\":\n      return { ...state, loadingUpdate: true };\n    case \"UPDATE_SUCCESS\":\n      return { ...state, loadingUpdate: false };\n    case \"UPDATE_FAIL\":\n      return { ...state, loadingUpdate: false };\n\n    default:\n      return state;\n  }\n};\n\nexport default function ProfileScreen() {\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const { userInfo } = state;\n  const [name, setName] = useState(userInfo.name);\n  const [email, setEmail] = useState(userInfo.email);\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  const [{ loadingUpdate }, dispatch] = useReducer(reducer, {\n    loadingUpdate: false,\n  });\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    try {\n      const { data } = await axios.put(\n        \"/api/users/profile\",\n        {\n          name,\n          email,\n          password,\n        },\n        {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        }\n      );\n      dispatch({\n        type: \"UPDATE_SUCCESS\",\n      });\n      ctxDispatch({ type: \"USER_SIGNIN\", payload: data });\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\n      toast.success(\"User Updated Successfully!\");\n    } catch (err) {\n      dispatch({\n        type: \"FETCH_FAIL\",\n      });\n      toast.error(getError(err));\n    }\n  };\n\n  return (\n    <div className='container small-container'>\n      <Helmet>\n        <title>User Profile</title>\n      </Helmet>\n      <h1 className='my-3'>User Profile</h1>\n      <form onSubmit={submitHandler}>\n        <Form.Group className='mb-3' contrilId='name'>\n          <Form.Label>Name</Form.Label>\n          <Form.Control\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required\n          />\n        </Form.Group>\n        <Form.Group className='mb-3' contrilId='email'>\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </Form.Group>\n        <Form.Group className='mb-3' contrilId='password'>\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </Form.Group>\n        <Form.Group className='mb-3' contrilId='password'>\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control\n            value={password}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            required\n          />\n        </Form.Group>\n        <div className='mb-3'>\n          <Button type='submit'>Update</Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}