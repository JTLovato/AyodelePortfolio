{"ast":null,"code":"import{useContext}from\"react\";import{Store}from\"../Store\";import{Helmet}from\"react-helmet-async\";import MessageBox from\"../components/MessageBox\";import Button from\"react-bootstrap/Button\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){const navigate=useNavigate();const{state,dispatch:ctxDispatch}=useContext(Store);const{cart:{cartItems}}=state;const updateCartHandler=async(item,quantity)=>{const{data}=await axios.get(\"/api/products/\".concat(item._id));if(data.countInStock<quantity){window.alert(\"Sorry. Product is out of stock\");return;}ctxDispatch({type:\"CART_ADD_ITEM\",payload:{...item,quantity}});};const removeItemHandler=item=>{ctxDispatch({type:\"CART_REMOVE_ITEM\",payload:item});};const checkoutHandler=()=>{navigate(\"/signin?redirect=/shipping\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart margin-holder\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Your Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"new-font\",children:\"Your Cart\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-holder\",children:[cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{to:\"/product/\".concat(item.slug),className:\"cart-item-holder\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"cart-image-thumbnail\"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-info\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),className:\"cart-item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-quantities\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>updateCartHandler(item,item.quantity-1),variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"cart-quantity-total\",children:item.quantity}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:()=>updateCartHandler(item,item.quantity+1),disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})}),/*#__PURE__*/_jsx(Button,{onClick:()=>removeItemHandler(item),variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-price\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Price:\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",item.price]})]})]},item._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"totals\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce((a,c)=>a+c.quantity,0),\" items) : $\",cartItems.reduce((a,c)=>a+c.price*c.quantity,0)]}),/*#__PURE__*/_jsx(\"button\",{className:\"checkout-button\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to Checkout\"})]})]})})]});}","map":{"version":3,"names":["useContext","Store","Helmet","MessageBox","Button","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","navigate","state","dispatch","ctxDispatch","cart","cartItems","updateCartHandler","item","quantity","data","get","concat","_id","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","className","children","length","to","map","slug","src","image","alt","name","onClick","variant","disabled","price","reduce","a","c"],"sources":["/Users/jtlovato/Documents/GitHub/AOPortfolio/AyodelePortfolio/frontend/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from \"react\";\nimport { Store } from \"../Store\";\nimport { Helmet } from \"react-helmet-async\";\nimport MessageBox from \"../components/MessageBox\";\nimport Button from \"react-bootstrap/Button\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport default function CartScreen() {\n  const navigate = useNavigate();\n  const { state, dispatch: ctxDispatch } = useContext(Store);\n  const {\n    cart: { cartItems },\n  } = state;\n\n  const updateCartHandler = async (item, quantity) => {\n    const { data } = await axios.get(`/api/products/${item._id}`);\n    if (data.countInStock < quantity) {\n      window.alert(\"Sorry. Product is out of stock\");\n      return;\n    }\n    ctxDispatch({\n      type: \"CART_ADD_ITEM\",\n      payload: { ...item, quantity },\n    });\n  };\n  const removeItemHandler = (item) => {\n    ctxDispatch({ type: \"CART_REMOVE_ITEM\", payload: item });\n  };\n\n  const checkoutHandler = () => {\n    navigate(\"/signin?redirect=/shipping\");\n  };\n\n  return (\n    <div className='cart margin-holder'>\n      <Helmet>\n        <title>Your Cart</title>\n      </Helmet>\n      <h1 className='new-font'>Your Cart</h1>\n      <div>\n        <div className='cart-holder'>\n          {cartItems.length === 0 ? (\n            <MessageBox>\n              Cart is empty. <Link to='/'>Go Shopping</Link>\n            </MessageBox>\n          ) : (\n            <div className='cart-list'>\n              {cartItems.map((item) => (\n                <div\n                  to={`/product/${item.slug}`}\n                  key={item._id}\n                  className='cart-item-holder'\n                >\n                  <img\n                    src={item.image}\n                    alt={item.name}\n                    className='cart-image-thumbnail'\n                  ></img>{\" \"}\n                  <div className='cart-item-info'>\n                    <Link\n                      to={`/product/${item.slug}`}\n                      className='cart-item-name'\n                    >\n                      {item.name}\n                    </Link>\n                    <div className='cart-quantities'>\n                      <Button\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity - 1)\n                        }\n                        variant='light'\n                        disabled={item.quantity === 1}\n                      >\n                        <i className='fas fa-minus-circle'></i>\n                      </Button>{\" \"}\n                      <span className='cart-quantity-total'>\n                        {item.quantity}\n                      </span>{\" \"}\n                      <Button\n                        variant='light'\n                        onClick={() =>\n                          updateCartHandler(item, item.quantity + 1)\n                        }\n                        disabled={item.quantity === item.countInStock}\n                      >\n                        <i className='fas fa-plus-circle'></i>\n                      </Button>\n                      <Button\n                        onClick={() => removeItemHandler(item)}\n                        variant='light'\n                      >\n                        <i className='fas fa-trash'></i>\n                      </Button>\n                    </div>\n                  </div>\n                  <div className='cart-item-price'>\n                    <h4>Price:</h4>\n                    <h3>${item.price}</h3>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n          <div className='totals'>\n            <h3>\n              Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)} items) :\n              ${cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\n            </h3>\n            <button\n              className='checkout-button'\n              onClick={checkoutHandler}\n              disabled={cartItems.length === 0}\n            >\n              Proceed to Checkout\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}