{"ast":null,"code":"import React,{useContext,useEffect,useReducer}from\"react\";import Chart from\"react-google-charts\";import axios from\"axios\";import{Store}from\"../Store\";import{getError}from\"../utils\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Card from\"react-bootstrap/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const reducer=(state,action)=>{switch(action.type){case\"FETCH_REQUEST\":return{...state,loading:true};case\"FETCH_SUCCESS\":return{...state,summary:action.payload,loading:false};case\"FETCH_FAIL\":return{...state,loading:false,error:action.payload};default:return state;}};export default function DashboardScreen(){const[{loading,summary,error},dispatch]=useReducer(reducer,{loading:true,error:\"\"});const{state}=useContext(Store);const{userInfo}=state;useEffect(()=>{const fetchData=async()=>{try{const{data}=await axios.get(\"/api/orders/summary\",{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});dispatch({type:\"FETCH_SUCCESS\",payload:data});}catch(err){dispatch({type:\"FETCH_FAIL\",payload:getError(err)});}};fetchData();},[userInfo]);return/*#__PURE__*/_jsxs(\"div\",{className:\"margin-holder dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:summary.users&&summary.users[0]?summary.users[0].numUsers:0}),/*#__PURE__*/_jsx(Card.Text,{children:\" Users\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:summary.orders&&summary.users[0]?summary.orders[0].numOrders:0}),/*#__PURE__*/_jsx(Card.Text,{children:\" Orders\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\"$\",summary.orders&&summary.users[0]?summary.orders[0].totalSales.toFixed(2):0]}),/*#__PURE__*/_jsx(Card.Text,{children:\" Orders\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sales\"}),summary.dailyOrders.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"No Sale\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"AreaChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Chart...\"}),data:[[\"Date\",\"Sales\"],...summary.dailyOrders.map(x=>[x._id,x.sales])]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Categories\"}),summary.productCategories.length===0?/*#__PURE__*/_jsx(MessageBox,{children:\"No Category\"}):/*#__PURE__*/_jsx(Chart,{width:\"100%\",height:\"400px\",chartType:\"PieChart\",loader:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Chart...\"}),data:[[\"Category\",\"Products\"],...summary.productCategories.map(x=>[x._id,x.count])]})]})]})]});}","map":{"version":3,"names":["React","useContext","useEffect","useReducer","Chart","axios","Store","getError","LoadingBox","MessageBox","Row","Col","Card","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","reducer","state","action","type","loading","summary","payload","error","DashboardScreen","dispatch","userInfo","fetchData","data","get","headers","Authorization","concat","token","err","className","children","variant","md","Body","Title","users","numUsers","Text","orders","numOrders","totalSales","toFixed","dailyOrders","length","width","height","chartType","loader","map","x","_id","sales","productCategories","count"],"sources":["/Users/jtlovato/Documents/GitHub/AOPortfolio/AyodelePortfolio/frontend/src/screens/DashboardScreen.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\nimport Chart from \"react-google-charts\";\nimport axios from \"axios\";\nimport { Store } from \"../Store\";\nimport { getError } from \"../utils\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_REQUEST\":\n      return { ...state, loading: true };\n    case \"FETCH_SUCCESS\":\n      return {\n        ...state,\n        summary: action.payload,\n        loading: false,\n      };\n    case \"FETCH_FAIL\":\n      return { ...state, loading: false, error: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default function DashboardScreen() {\n  const [{ loading, summary, error }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: \"\",\n  });\n  const { state } = useContext(Store);\n  const { userInfo } = state;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const { data } = await axios.get(\"/api/orders/summary\", {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n        dispatch({ type: \"FETCH_SUCCESS\", payload: data });\n      } catch (err) {\n        dispatch({\n          type: \"FETCH_FAIL\",\n          payload: getError(err),\n        });\n      }\n    };\n    fetchData();\n  }, [userInfo]);\n\n  return (\n    <div className='margin-holder dashboard'>\n      <h1>Dashboard</h1>\n      {loading ? (\n        <LoadingBox />\n      ) : error ? (\n        <MessageBox variant='danger'>{error}</MessageBox>\n      ) : (\n        <>\n          <Row>\n            <Col md={4}>\n              <Card>\n                <Card.Body>\n                  <Card.Title>\n                    {summary.users && summary.users[0]\n                      ? summary.users[0].numUsers\n                      : 0}\n                  </Card.Title>\n                  <Card.Text> Users</Card.Text>\n                </Card.Body>\n              </Card>\n            </Col>\n            <Col md={4}>\n              <Card>\n                <Card.Body>\n                  <Card.Title>\n                    {summary.orders && summary.users[0]\n                      ? summary.orders[0].numOrders\n                      : 0}\n                  </Card.Title>\n                  <Card.Text> Orders</Card.Text>\n                </Card.Body>\n              </Card>\n            </Col>\n            <Col md={4}>\n              <Card>\n                <Card.Body>\n                  <Card.Title>\n                    $\n                    {summary.orders && summary.users[0]\n                      ? summary.orders[0].totalSales.toFixed(2)\n                      : 0}\n                  </Card.Title>\n                  <Card.Text> Orders</Card.Text>\n                </Card.Body>\n              </Card>\n            </Col>\n          </Row>\n          <div className='my-3'>\n            <h2>Sales</h2>\n            {summary.dailyOrders.length === 0 ? (\n              <MessageBox>No Sale</MessageBox>\n            ) : (\n              <Chart\n                width='100%'\n                height='400px'\n                chartType='AreaChart'\n                loader={<div>Loading Chart...</div>}\n                data={[\n                  [\"Date\", \"Sales\"],\n                  ...summary.dailyOrders.map((x) => [x._id, x.sales]),\n                ]}\n              ></Chart>\n            )}\n          </div>\n          <div className='my-3'>\n            <h2>Categories</h2>\n            {summary.productCategories.length === 0 ? (\n              <MessageBox>No Category</MessageBox>\n            ) : (\n              <Chart\n                width='100%'\n                height='400px'\n                chartType='PieChart'\n                loader={<div>Loading Chart...</div>}\n                data={[\n                  [\"Category\", \"Products\"],\n                  ...summary.productCategories.map((x) => [x._id, x.count]),\n                ]}\n              ></Chart>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}